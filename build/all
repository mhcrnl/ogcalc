#!/bin/sh

set -e

# Note that this script builds *everything* and hence requires
# all prerequisites to be installed.  If you don't have everything,
# run the builds from individual subdirectories.

# Build all Qt code

for type in plain uic; do
  (
    echo "Building qt/$type"
    cd "qt/$type"
    echo "Plain make"
    (cd make && make clean all)
    echo "Autoconf/automake"
    (cd automake && autoreconf -i && ./configure && make clean all distcheck)
    echo "qmake"
    (cd qmake && qmake && make clean all)
    echo "cmake"
    (cd cmake && cmake . && make clean all dist)
  )
done

# Build all GTK+ code
for type in $(find gtk -name 'configure.ac' | xargs dirname); do
  (
    echo "Building $type"
    (cd "$type" autoreconf -i ./configure && make clean all distcheck)
  )
done

